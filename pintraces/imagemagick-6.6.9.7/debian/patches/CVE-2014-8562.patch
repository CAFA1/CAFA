Backport of:

From 75aa9806131328e6bf437e9bf8f1ae4b0cecbc36 Mon Sep 17 00:00:00 2001
From: dirk <dirk@git.imagemagick.org>
Date: Sat, 25 Oct 2014 12:30:45 +0000
Subject: [PATCH] Fix last value in dicom_info and added missing != NULL check.

---
 coders/dcm.c | 23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)

Index: imagemagick-6.7.7.10/coders/dcm.c
===================================================================
--- imagemagick-6.7.7.10.orig/coders/dcm.c	2016-11-11 07:36:11.852193110 -0500
+++ imagemagick-6.7.7.10/coders/dcm.c	2016-11-11 07:39:08.153807636 -0500
@@ -2609,7 +2609,7 @@
     { 0xfffe, 0xe000, "!!", "Item" },
     { 0xfffe, 0xe00d, "!!", "Item Delimitation Item" },
     { 0xfffe, 0xe0dd, "!!", "Sequence Delimitation Item" },
-    { 0xffff, 0xffff, "xs", "" }
+    { 0xffff, 0xffff, "xs", (char *) NULL }
   };
 
 /*
@@ -3406,17 +3406,20 @@
           if ((group == (ssize_t) dicom_info[i].group) &&
               (element == (ssize_t) dicom_info[i].element))
             break;
-        attribute=AcquireString("dcm:");
-        (void) ConcatenateString(&attribute,dicom_info[i].description);
-        for (i=0; i < (ssize_t) MagickMax(length,4); i++)
-          if (isprint((int) data[i]) == MagickFalse)
-            break;
-        if ((i == (ssize_t) length) || (length > 4))
+        if (dicom_info[i].description != (char *) NULL)
           {
-            (void) SubstituteString(&attribute," ","");
-            (void) SetImageProperty(image,attribute,(char *) data);
+            attribute=AcquireString("dcm:");
+            (void) ConcatenateString(&attribute,dicom_info[i].description);
+            for (i=0; i < (ssize_t) MagickMax(length,4); i++)
+              if (isprint((int) data[i]) == MagickFalse)
+                break;
+            if ((i == (ssize_t) length) || (length > 4))
+              {
+                (void) SubstituteString(&attribute," ","");
+                (void) SetImageProperty(image,attribute,(char *) data);
+              }
+            attribute=DestroyString(attribute);
           }
-        attribute=DestroyString(attribute);
       }
     if (image_info->verbose != MagickFalse)
       {
